pipeline{
agent {
docker {
image 'python:3.7-alpine'
args '-u root'
}
}
stages{
stage('Prepare environment'){
steps{
sh 'apk add git'
}
}
stage('Clone code from Git repository and setup python env'){
steps{
sh 'git clone https://github.com/exskandr/app-for-jenkins.git'
sh 'pip install -r app-for-jenkins/requirements.txt'
}
}
stage('test code'){
steps{
sh 'docker-compose up'
}
}
}

}
